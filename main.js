(()=>{"use strict";function e(e){e.classList.add("popup_opened"),document.addEventListener("keydown",n)}function t(e){e.classList.remove("popup_opened"),document.removeEventListener("keydown",n)}function n(e){"Escape"===e.key&&t(document.querySelector(".popup_opened"))}document.querySelectorAll(".popup").forEach((function(e){return e.addEventListener("click",(function(n){n.target.classList.contains("popup")&&t(e)}))}));var o=["inputSelector","submitButtonSelector","inactiveButtonClass"];function r(e,t){if(null==e)return{};var n,o,r=function(e,t){if(null==e)return{};var n,o,r={},c=Object.keys(e);for(o=0;o<c.length;o++)n=c[o],t.indexOf(n)>=0||(r[n]=e[n]);return r}(e,t);if(Object.getOwnPropertySymbols){var c=Object.getOwnPropertySymbols(e);for(o=0;o<c.length;o++)n=c[o],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}var c=document.querySelector("#new_element").content;function i(e,t,n){var o=c.querySelector(".element").cloneNode(!0);o.querySelector(".element__text").textContent=e;var r=o.querySelector(".element__image");r.src=t,r.alt=e,o.querySelector(".element__delete-icon").addEventListener("click",(function(){o.remove()}));var i=o.querySelector(".element__like-pic");return i.addEventListener("click",(function(){i.classList.toggle("element__like_active")})),r.addEventListener("click",(function(){return n(t,e)})),o}var l,u,d,s=document.querySelector(".elements"),a=document.getElementById("picture"),p=document.getElementById("place-close"),m=document.querySelector(".profile__info-picture"),f=document.querySelector(".popup__close"),v=document.querySelector(".profile__add-button"),y=document.querySelector(".popup__close_pic"),_=document.getElementById("nickname"),E=document.getElementById("name"),k=document.getElementById("proffesion"),g=document.querySelector(".profile__main-text"),S=document.querySelector(".profile__text"),L=document.getElementById("place"),x=document.getElementById("name-place"),b=document.getElementById("link-picture"),C=document.getElementById("form-Place"),q=document.getElementById("saveButton"),B=document.getElementById("place-save"),I=document.getElementById("avatar"),h=document.getElementById("avatarPic"),j=document.getElementById("link-profile"),A=document.getElementById("profile"),O=document.getElementById("formProfile"),w=document.getElementById("profileClose"),P=document.getElementById("profile-save");function z(t,n){e(a),a.querySelector(".popup__image").src=t,a.querySelector(".popup__image").alt=n,a.querySelector(".popup__caption").textContent=n}m.addEventListener("click",(function(){e(_),E.value=g.textContent,k.value=S.textContent,q.textContent="Сохранить"})),f.addEventListener("click",(function(){t(_)})),v.addEventListener("click",(function(){C.reset(),B.classList.add("popup__button_disabled"),B.setAttribute("disabled",""),e(L),function(e,t,n){Array.from(e.querySelectorAll(".popup__error")).forEach((function(e){e.textContent=""})),t.classList.remove("popup__input_noname"),n.classList.remove("popup__input_noname")}(L,x,b),B.textContent="Сохранить"})),p.addEventListener("click",(function(){t(L)})),y.addEventListener("click",(function(){t(a)})),I.addEventListener("click",(function(){e(A),O.reset(),A.querySelector(".popup__error").textContent="",j.classList.remove("popup__input_noname"),P.textContent="Сохранить"})),w.addEventListener("click",(function(){t(A)})),B.addEventListener("click",(function(){return B.textContent="Сохранение...",t(L),void s.prepend(i(x.value,b.value,z))})),q.addEventListener("click",(function(){return q.textContent="Сохранение...",g.textContent=E.value,S.textContent=k.value,void t(_)})),P.addEventListener("click",(function(){return P.textContent="Сохранение...",h.src=j.value,void t(A)})),[{name:"Архыз",link:"https://pictures.s3.yandex.net/frontend-developer/cards-compressed/arkhyz.jpg"},{name:"Челябинская область",link:"https://pictures.s3.yandex.net/frontend-developer/cards-compressed/chelyabinsk-oblast.jpg"},{name:"Иваново",link:"https://pictures.s3.yandex.net/frontend-developer/cards-compressed/ivanovo.jpg"},{name:"Камчатка",link:"https://pictures.s3.yandex.net/frontend-developer/cards-compressed/kamchatka.jpg"},{name:"Холмогорский район",link:"https://pictures.s3.yandex.net/frontend-developer/cards-compressed/kholmogorsky-rayon.jpg"},{name:"Байкал",link:"https://pictures.s3.yandex.net/frontend-developer/cards-compressed/baikal.jpg"}].forEach((function(e){var t;t=i(e.name,e.link,z),s.prepend(t)})),u=(l={formSelector:".popup__form",inputSelector:".popup__input",submitButtonSelector:".popup__button",inactiveButtonClass:"popup__button_disabled",inputErrorClass:".popup__error_",errorClass:"popup__error_visible",inputErrorLine:"popup__input_noname"}).formSelector,d=r(l,["formSelector"]),Array.from(document.querySelectorAll(u)).forEach((function(e){!function(e,t){var n=t.inputSelector,c=t.submitButtonSelector,i=t.inactiveButtonClass,l=r(t,o),u=e.querySelector(c);e.addEventListener("input",(function(){Array.from(e.querySelectorAll(n)).forEach((function(t){!function(e,t,n){t.validity.valid?function(e,t,n){var o=n.errorClass,r=n.inputErrorClass,c=n.inputErrorLine,i=e.querySelector(r+t.id);t.classList.remove(c),i.classList.remove(o),i.textContent=""}(e,t,n):function(e,t,n){var o=n.errorClass,r=n.inputErrorClass,c=n.inputErrorLine,i=e.querySelector(r+t.id);t.classList.add(c),i.classList.add(o),i.textContent=t.validationMessage}(e,t,n)}(e,t,l),function(e,t,n){0==e.checkValidity()?function(e,t){e.classList.add(t),e.setAttribute("disabled","")}(t,n):(t.classList.remove(n),t.removeAttribute("disabled"))}(e,u,i)}))}))}(e,d)}))})();